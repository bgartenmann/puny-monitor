<section class="controls">
  <form action="/" method="get">
    <select name="duration" onchange="this.form.submit()">
      <option value="1h" <%= params[:duration] == '1h' ? 'selected' : '' %>>1 Hour</option>
      <option
        value="1d"
        <%= params[:duration] == '1d' || params[:duration].nil? ? 'selected' : '' %>
      >1 Day</option>
      <option value="3d" <%= params[:duration] == '3d' ? 'selected' : '' %>>3 Days</option>
      <option value="1w" <%= params[:duration] == '1w' ? 'selected' : '' %>>1 Week</option>
      <option value="1m" <%= params[:duration] == '1m' ? 'selected' : '' %>>1 Month</option>
    </select>
    <select name="interval" onchange="this.form.submit()">
      <option value="5" <%= params[:interval] == '5' ? 'selected' : '' %>>5 minutes</option>
      <option value="15" <%= params[:interval] == '15' || params[:interval].nil? ? 'selected' : '' %>>15 minutes</option>
      <option value="60" <%= params[:interval] == '60' ? 'selected' : '' %>>1 hour</option>
      <option value="120" <%= params[:interval] == '120' ? 'selected' : '' %>>2 hours</option>
      <option value="1440" <%= params[:interval] == '1440' ? 'selected' : '' %>>1 day</option>
    </select>
  </form>
</section>

<section class="charts">

  <div class="tile">
    <h2>CPU Usage</h2>
    <%= area_chart "/data/cpu_usage?duration=#{params[:duration] || "1d"}&interval=#{params[:interval] || "15"}",
    ytitle: "CPU Usage (%)",
    min: 0,
    max: 100,
    library: {
      title: {
        text: "CPU Usage",
      },
    },
    refresh: 5 %>
  </div>

  <div class="tile">
    <h2>CPU Load</h2>
    <%= line_chart "/data/cpu_load?duration=#{params[:duration] || "1d"}&interval=#{params[:interval] || "15"}",
    ytitle: "Load Average",
    library: {
      title: {
        text: "Load Average",
      },
    },
    refresh: 5 %>
  </div>

  <div class="tile">
    <h2>Memory Usage</h2>
    <%= area_chart "/data/memory_usage?duration=#{params[:duration] || "1d"}&interval=#{params[:interval] || "15"}",
    ytitle: "Memory Usage (%)",
    min: 0,
    max: 100,
    library: {
      title: {
        text: "Memory Usage",
      },
    },
    refresh: 5 %>
  </div>

  <div class="tile">
    <h2>Filesystem Usage</h2>
    <%= area_chart "/data/filesystem_usage?duration=#{params[:duration] || "1d"}&interval=#{params[:interval] || "15"}",
    ytitle: "Used Space (%)",
    min: 0,
    max: 100,
    library: {
      title: {
        text: "Filesystem Usage",
      },
    },
    refresh: 5 %>
  </div>

  <div class="tile">
    <h2>Disk I/O</h2>
    <%= area_chart "/data/disk_io?duration=#{params[:duration] || "1d"}&interval=#{params[:interval] || "15"}",
    ytitle: "MB/s",
    library: {
      title: {
        text: "Disk I/O",
      },
    },
    refresh: 5 %>
  </div>

  <div class="tile">
    <h2>Bandwidth</h2>
    <%= area_chart "/data/bandwidth?duration=#{params[:duration] || "1d"}&interval=#{params[:interval] || "15"}",
    ytitle: "Bandwidth (Mbps)",
    library: {
      title: {
        text: "Bandwidth",
      },
    },
    refresh: 5 %>
  </div>

</section>
